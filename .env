# Configuración general
SYMBOL=BTCUSDT
INTERVAL=15m                  # usado por data_processing.py
TIMEFRAME=15m
TIMEZONE=America/Merida
RNG_SEED=1337

# Directorios y paths
DATA_DIR=ML/data
RESULTS_DIR=ML/results
OUT_DIR=ML/out

# Dataset procesado usado por entrenamiento y backtest
DATA_PATH=ML/data/processed/BTCUSDT_15m_processed.csv

# Artefactos del modelo
MODEL_OUT_DIR=ML/results
MODEL_PIPELINE_NAME=btc15m_xgb_calibrated_trained_pipeline.joblib
PIPE_PATH=ML/results/btc15m_xgb_calibrated_trained_pipeline.joblib
THR_PATH=ML/results/threshold.txt

LOG_LEVEL=INFO

# Horizonte de etiqueta / cierre
LOOK_AHEAD=3
LOCK_LOOKAHEAD_3=1

# Rango de descarga / procesamiento
START=2019-01-01
END=

# Etiquetado: umbral relativo a volatilidad
K_VOL=1.8

# Costos
USE_MAKER=1
MAKER_FEE_PCT=0.0002
TAKER_FEE_PCT=0.0007
SLIPPAGE_PCT=0.0001
SPREAD_MIN_BPS=0
STRESS_COST_BPS=0

# Filtros de régimen
ATR_ENABLE=1
BBW_ENABLE=1
ATR_PCT_MIN=0.0010
ATR_PCT_MAX=0.02
BBW_MIN=0.0010
VOL_FILTER_FRAC_MIN=0.10
GOOD_HOURS_MIN_EDGE_BPS=1.0

# Filtros de calidad de vela
MIN_RANGE_ATR=0.9
MIN_BODY_ATR=0.25
MAX_WICKINESS=0.65

# Backtesting WFA
TRAIN_BARS=6000
TEST_BARS=1000
STEP_BARS=1000
EMBARGO_BARS=2
WFA_WINDOW_MODE=rolling
EQUITY_INITIAL=1000

NON_OVERLAP=1
MIN_SPACING=3

MIN_TRADES_VAL=20
MAX_TRADES_PER_DAY=20
MIN_EV_PCT=0.0002

THR_QUANTILES=0.60,0.62,0.64,0.66,0.68,0.72,0.75

FALLBACK_ENABLE=1
FALLBACK_MIN_SPACING=4
FALLBACK_MAX_TRADES_PER_DAY=8
FALLBACK_MIN_TRADES_VAL=20
FALLBACK_MIN_EV_PCT=0.00015
FALLBACK_MIN_PROBA=0.60
FALLBACK_TOPK_PER_DAY=3

# Entrenamiento (modelo)
RSI_ENABLE=1
MACD_ENABLE=1
SMA_EMA_ENABLE=1

LABEL_MODE=RETURN_GT_0
LABEL_ATR_WINDOW=14
LABEL_MIN_MOVE_BPS=0

CAL_VAL_FRAC=0.10
CAL_METHOD=isotonic

MODEL_TYPE=XGBOOST
XGB_N_ESTIMATORS=895
XGB_MAX_DEPTH=12
XGB_LEARNING_RATE=0.016330542
XGB_SUBSAMPLE=0.886838649
XGB_COLSAMPLE_BYTREE=0.818697297
XGB_REG_LAMBDA=0.795282713
XGB_REG_ALPHA=0.562196579
XGB_GAMMA=1.24926602
XGB_SCALE_POS_WEIGHT=0.95
XGB_TREE_METHOD=hist
XGB_N_JOBS=2
XGB_EARLY_STOPPING_ROUNDS=50

MIN_EV_PCT_TRAIN=0.0002
MIN_TRADES_TRAIN=30
MAX_TRADES_PER_DAY_TRAIN=16
NON_OVERLAP_TRAIN=1
MIN_SPACING_TRAIN=4
THR_QUANTILES_TRAIN=0.60,0.62,0.64,0.66,0.68,0.72,0.75

SAVE_MODEL=1
SAVE_CALIBRATOR=1
SAVE_THRESHOLD=1
ARTIFACTS_FORMAT=joblib
MODEL_NAME=btc15m_xgb_calibrated_h3

# Defaults para ejecución rápida
TP_BPS=28
SL_BPS=14
TIMEOUT_BARS=3

